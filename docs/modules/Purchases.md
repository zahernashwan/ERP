# المشتريات (Purchases)

## الوصف العام

وحدة المشتريات تغطي إدارة فواتير المشتريات المحلية والخارجية، أوامر الشراء، مرتجعات المشتريات، والاعتمادات المستندية.

## الموقع في الكود

> لم تُنفَّذ بعد — مخطط لها ضمن التوسعات المستقبلية.

```
src/ERP.Domain/Purchases/          (مخطط)
src/ERP.Application/Purchases/     (مخطط)
```

## الكيانات والـ Value Objects

> سيتم تعريفها عند التنفيذ. المتوقع:

| العنصر | النوع | الوصف |
| --- | --- | --- |
| `PurchaseInvoice` | Aggregate Root | فاتورة المشتريات |
| `PurchaseOrder` | Aggregate Root | أمر الشراء |
| `PurchaseReturn` | Aggregate Root | مرتجع المشتريات |

## القواعد (Invariants)

- الفاتورة يجب أن تحتوي سطرًا واحدًا على الأقل.
- أمر الشراء يجب أن يُعتمد قبل التنفيذ.
- المرتجع يجب أن يرتبط بفاتورة أصلية.
- الاعتماد المستندي يرتبط بعملية استيراد خارجية.

## أحداث النطاق (Domain Events)

> سيتم تعريفها عند التنفيذ.

## حالات الاستخدام

> من شجرة الوظائف:

| العملية | الوصف |
| --- | --- |
| فاتورة مشتريات محلية | تسجيل فاتورة شراء محلية |
| فاتورة مشتريات خارجية | تسجيل فاتورة شراء خارجية (استيراد) |
| أوامر الشراء | إنشاء واعتماد أوامر شراء |
| مرتجع مشتريات | تسجيل مرتجع على فاتورة سابقة |
| اعتماد مستندي | إدارة الاعتمادات المستندية |

## الاعتماديات

- تعتمد على وحدة الحسابات لتوليد القيود المحاسبية.
- تعتمد على وحدة المخزون لتحديث الأرصدة.
- تعتمد على بيانات الموردين.
