# ุงูุชูุตูุงุช ุงูุญุฑุฌุฉ โ Critical Recommendations

> ๐ `docs/` ยท [โ ุฎุฑูุทุฉ ุงูุชูุซูู](documentation-map.md)

## ุงููุตู ุงูุนุงู

ููุซูู ูุฐุง ุงูููู ุงูุชูุตูุงุช ุงูุญุฑุฌุฉ ูุชุญุณูู ุญู NoufexERP ุจูุงุกู ุนูู ุชุญููู ุงูุญุงูุฉ ุงูุฑุงููุฉ ูููุดุฑูุน.
ุชุฑุชุจุท ูู ุชูุตูุฉ ุจุงูููุงุนุฏ ุงููุนูุงุฑูุฉ ุงููุญุฏุฏุฉ ูู [`ARCHITECTURE_RULES.md`](ARCHITECTURE_RULES.md) ุญูุซูุง ููุทุจู.

---

## 1. ุงูุชุฎุฒูู ุงูุฏุงุฆู โ Persistent Storage

| ุงูุจูุฏ | ุงูุชูุตูู |
| --- | --- |
| **ุงูุฃููููุฉ** | ๐ด ุญุฑุฌุฉ |
| **ุงูุญุงูุฉ ุงูุฑุงููุฉ** | ุฌููุน ุงููุณุชูุฏุนุงุช (Repositories) ุชุนูู ูู ุงูุฐุงูุฑุฉ ููุท (`InMemory`) โ ุชูููุฏ ุงูุจูุงูุงุช ุนูุฏ ุฅุบูุงู ุงูุชุทุจูู |
| **ุงูุชูุตูุฉ** | ุฅุถุงูุฉ ุชูููุฐ `EF Core` (ุฃู ุฃู ORM) ูู ุทุจูุฉ `Infrastructure` ูุน `DbContext` ูููุงุฌุฑุงุช (Migrations) |
| **ุงููุงุนุฏุฉ ุงููุฑุชุจุทุฉ** | R-INF-01ุ R-INF-03 โ ุงูุชูููุฐ ูุทุจูู ูุงุฌูุงุช `Application` ููููู ุงุณุชุจุฏุงูู ุจุฏูู ุชุฃุซูุฑ ุนูู ุงูุทุจูุงุช ุงูุฃุฎุฑู |

---

## 2. ูุนุงูุฌุฉ ุฃุญุฏุงุซ ุงููุทุงู โ Domain Event Handling

| ุงูุจูุฏ | ุงูุชูุตูู |
| --- | --- |
| **ุงูุฃููููุฉ** | ๐ด ุญุฑุฌุฉ |
| **ุงูุญุงูุฉ ุงูุฑุงููุฉ** | ุงูู Domain Events ุชููุดุฃ ุฏุงุฎู ุงูู Aggregates (ูุซู `JournalPosted`) ููููุง ูุง ุชููุดุฑ ููุง ุชูุนุงูุฌ |
| **ุงูุชูุตูุฉ** | ุชูุนูู ูุดุฑ ุงูุฃุญุฏุงุซ ุนุจุฑ `MediatR INotification` ูุน ุฅุถุงูุฉ Handlers ููุนุงูุฌุชูุง (ูุซูุงู: ุชุฑุญูู ุชููุงุฆู ุนูุฏ ูุดุฑ ููุฏ) |
| **ุงููุงุนุฏุฉ ุงููุฑุชุจุทุฉ** | R-DOM-06ุ R-DOM-07ุ R-DOM-08 โ ุงูุฃุญุฏุงุซ ุชูุตุฏุฑ ูู ุงูู Aggregate Root ูุชุญูู ุจูุงูุงุช ููุท |

---

## 3. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุงูุชุณุฌูู โ Error Handling & Logging

| ุงูุจูุฏ | ุงูุชูุตูู |
| --- | --- |
| **ุงูุฃููููุฉ** | ๐ด ุญุฑุฌุฉ |
| **ุงูุญุงูุฉ ุงูุฑุงููุฉ** | ูุง ููุฌุฏ ุชุณุฌูู ูุฑูุฒู (`ILogger`) ููุง ูุนุงูุฌุฉ ุดุงููุฉ ููุงุณุชุซูุงุกุงุช ูู ููุทุฉ ุงูุชุดุบูู |
| **ุงูุชูุตูุฉ** | ุฅุถุงูุฉ `Microsoft.Extensions.Logging` ูุน ูุฒููุฏ ุชุณุฌูู (ูุซู Serilog) ูู `Bootstrapper`ุ ููุนุงูุฌุฉ ุงุณุชุซูุงุกุงุช ุดุงููุฉ ูู `Application.ThreadException` |
| **ุงููุงุนุฏุฉ ุงููุฑุชุจุทุฉ** | R-BST-01ุ R-BST-03 โ ุงูุชููุฆุฉ ูุงูุชุณุฌูู ุชุชู ูู Bootstrapper ููุท |

---

## 4. ุณุฌู ุงููุฑุงุฌุนุฉ โ Audit Trail

| ุงูุจูุฏ | ุงูุชูุตูู |
| --- | --- |
| **ุงูุฃููููุฉ** | ๐ ุนุงููุฉ |
| **ุงูุญุงูุฉ ุงูุฑุงููุฉ** | ูุง ุชูุฌุฏ ุญููู ูุฑุงุฌุนุฉ (CreatedByุ ModifiedByุ CreatedAtุ ModifiedAt) ูู ุฃุบูุจ ุงูููุงูุงุช |
| **ุงูุชูุตูุฉ** | ุฅุถุงูุฉ ูุงุฌูุฉ `IAuditable` ูู `Domain` ูุน ุญููู ุงููุฑุงุฌุนุฉุ ูุชุนุจุฆุชูุง ุชููุงุฆูุงู ูู `UnitOfWork` ุนูุฏ ุงูุญูุธ |
| **ุงููุงุนุฏุฉ ุงููุฑุชุจุทุฉ** | R-DOM-01 โ ุงูููุงุนุฏ ุงูุชุฌุงุฑูุฉ ูู Domain ููุท |

---

## 5. ุงูุชุญูู ูู ุตุญุฉ ุงููุฏุฎูุงุช โ Input Validation

| ุงูุจูุฏ | ุงูุชูุตูู |
| --- | --- |
| **ุงูุฃููููุฉ** | ๐ ุนุงููุฉ |
| **ุงูุญุงูุฉ ุงูุฑุงููุฉ** | ุงูุชุญูู ูุชู ููุท ุนุจุฑ ุงุณุชุซูุงุกุงุช ููุช ุงูุชุดุบูู ุฏุงุฎู ุงูู Aggregates โ ูุง ููุฌุฏ ุชุญูู ูุณุจู ุนูู ูุณุชูู Commands |
| **ุงูุชูุตูุฉ** | ุฅุถุงูุฉ ุทุจูุฉ ุชุญูู (ูุซู `FluentValidation`) ูู Pipeline Behavior ูู `MediatR` ุฏุงุฎู ุทุจูุฉ `Application` |
| **ุงููุงุนุฏุฉ ุงููุฑุชุจุทุฉ** | R-APP-07 โ Handler ููููุถ ููุทู ุงูุฃุนูุงู ููู Domain ูุน ุฅููุงููุฉ ุฅุถุงูุฉ ุชุญูู ูุณุจู |

---

## 6. ุงุฎุชุจุงุฑุงุช ุทุจูุฉ ุงููุทุงู โ Domain Tests Coverage

| ุงูุจูุฏ | ุงูุชูุตูู |
| --- | --- |
| **ุงูุฃููููุฉ** | ๐ ุนุงููุฉ |
| **ุงูุญุงูุฉ ุงูุฑุงููุฉ** | ููุฌุฏ ููู ุงุฎุชุจุงุฑ ูุงุญุฏ ููุท (`JournalTests.cs`) ูู `ERP.Domain.Tests` โ ูุง ุชุบุทูุฉ ูู `ChartOfAccounts` ุฃู `Ledger` ุฃู `Account` |
| **ุงูุชูุตูุฉ** | ุฅุถุงูุฉ ุงุฎุชุจุงุฑุงุช ูุญุฏุฉ ููู invariant ูู ูู Aggregate Root (ChartOfAccountsุ Ledgerุ Account) |
| **ุงููุงุนุฏุฉ ุงููุฑุชุจุทุฉ** | R-TST-01 โ ูู invariant ูู Domain ูุฌุจ ุฃู ูููู ูู ุงุฎุชุจุงุฑ |

---

## 7. ูุญุฏุฉ ุงูุนูู ุงูุญููููุฉ โ Real Unit of Work

| ุงูุจูุฏ | ุงูุชูุตูู |
| --- | --- |
| **ุงูุฃููููุฉ** | ๐ก ูุชูุณุทุฉ |
| **ุงูุญุงูุฉ ุงูุฑุงููุฉ** | `InMemoryUnitOfWork.SaveChangesAsync()` ูุง ูููู ุจุฃู ุนูู ูุนูู โ ูุง ุถูุงู ูุญุฏูุฏ ุงููุนุงููุฉ |
| **ุงูุชูุตูุฉ** | ุฑุจุท `IUnitOfWork` ุจู `DbContext.SaveChangesAsync()` ุนูุฏ ุงูุงูุชูุงู ูู EF Core ูุถูุงู ุงูุฐุฑูุฉ (Atomicity) |
| **ุงููุงุนุฏุฉ ุงููุฑุชุจุทุฉ** | R-APP-06 โ Handler ูุณุชุฎุฏู `IUnitOfWork` ูุถูุงู ุญุฏูุฏ ุงููุนุงููุฉ |

---

## 8. ุฅููุงู ูุงุฌูุงุช ุงููุณุชุฎุฏู โ Complete UI Forms

| ุงูุจูุฏ | ุงูุชูุตูู |
| --- | --- |
| **ุงูุฃููููุฉ** | ๐ก ูุชูุณุทุฉ |
| **ุงูุญุงูุฉ ุงูุฑุงููุฉ** | ุจุนุถ ุงูููุงุฐุฌ (ูุซู ุดุงุดุงุช ุงูุชูุงุตูู) ุบูุฑ ููุชููุฉ ุงููุธุงุฆู |
| **ุงูุชูุตูุฉ** | ุฅููุงู ุฌููุน ููุงุฐุฌ WinForms ูุน ุฑุจุทูุง ุจุงูู Controllers ูุญุงูุงุช ุงูุงุณุชุฎุฏุงู ุงูููุงุจูุฉ |
| **ุงููุงุนุฏุฉ ุงููุฑุชุจุทุฉ** | R-PRE-01ุ R-PRE-03 โ ุงููุงุฌูุฉ ุชุนุฑุถ ููุท ููุง ุชุญุชูู ููุทู ุฃุนูุงู |

---

## ููุฎุต ุงูุฃููููุงุช

| ุงูุฃููููุฉ | ุงูุชูุตูุฉ | ุงูุฃุซุฑ |
| --- | --- | --- |
| ๐ด ุญุฑุฌุฉ | ุงูุชุฎุฒูู ุงูุฏุงุฆู (EF Core) | ุจุฏููู ูุง ูุตูุญ ุงููุธุงู ููุงุณุชุฎุฏุงู ุงููุนูู |
| ๐ด ุญุฑุฌุฉ | ูุนุงูุฌุฉ ุฃุญุฏุงุซ ุงููุทุงู | ุจุฏูููุง ูุง ูุนูู ุงูุชูุงูู ุจูู ุงููุญุฏุงุช |
| ๐ด ุญุฑุฌุฉ | ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุงูุชุณุฌูู | ุจุฏูููุง ูุง ูููู ุชุดุฎูุต ุงููุดุงูู ูู ุงูุฅูุชุงุฌ |
| ๐ ุนุงููุฉ | ุณุฌู ุงููุฑุงุฌุนุฉ | ุถุฑูุฑู ููุงูุชุซุงู ูุงููุญุงุณุจุฉ |
| ๐ ุนุงููุฉ | ุงูุชุญูู ูู ุงููุฏุฎูุงุช | ูููุน ุจูุงูุงุช ุบูุฑ ุตุงูุญุฉ ูู ุงููุตูู ูููุธุงู |
| ๐ ุนุงููุฉ | ุงุฎุชุจุงุฑุงุช ุทุจูุฉ ุงููุทุงู | ูุถูู ุตุญุฉ ุงูููุงุนุฏ ุงูุชุฌุงุฑูุฉ |
| ๐ก ูุชูุณุทุฉ | ูุญุฏุฉ ุงูุนูู ุงูุญููููุฉ | ูุถูู ุณูุงูุฉ ุงูุจูุงูุงุช |
| ๐ก ูุชูุณุทุฉ | ุฅููุงู ูุงุฌูุงุช ุงููุณุชุฎุฏู | ููููู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู |

_Last Updated: 2026-02-10_
